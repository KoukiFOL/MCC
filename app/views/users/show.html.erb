<div class="cover-user-show">
  <div class="container">
    <div class="row">
        <% if user_signed_in? && @user == current_user %>
          <h1 class="d-flex justify-content-center display-2 mt-5 mb-5">マイページ</h1>
        <% else %>
          <h1 class="d-flex justify-content-center display-2 fw-nomal mt-5 mb-5" >
          <%= @user.name%>
          </h1>
        <% end %>
    </div>
    <div class="row d-flex justify-content-center">
        <div class="col">
          <% if @user.profile_image_id? %>  <!-- アップロード画像がある場合に実行する -->
            <p>
              <%= image_tag @user.profile_image_id.half.url, class: "my-3 profile-img" %><!-- userインスタンスの画像ファイルのURLを取得し表示 -->
            </p>
          <% end %>
        </div>
        <div class="col d-flex flex-column justify-content-center">
          <div class="ml-2 mb-2 card w-100" style="width: 40%;">
            <p class="d-flex justify-content-center h1 lh-base"><%= @user.profile%></p>
          </div>
        </div>
    </div>
    <div class="d-flex justify-content-end">
      <% if user_signed_in? && @user == current_user %>
        <%= link_to "プロフィール編集", edit_user_path(@user), class: "btn-sm btn-success" %>
      <% end %>
      <% if current_user != @user %>
        <% if current_user.following?(@user) %>
          <%= link_to 'フォロー外す', user_relationships_path(@user.id), data: { turbo: true, turbo_method: :delete }, class: "btn-sm btn-danger" %>
        <% else %>
          <%= link_to 'フォローする', user_relationships_path(@user.id), data: { turbo: true, turbo_method: :post }, class: "btn-sm btn-success" %>
        <% end %>
    </div>
      <% end %>
  
      <div class="d-flex">

      </div>
      <div class="d-flex">

        <%= link_to "follow:#{@user.followings.count}", " /users/#{@user.id}/followings" %>


        <%= link_to "follower:#{@user.followers.count}", " /users/#{@user.id}/followers" %>

      </div>

  <div class="row justify-content-center">
    <% @posts.each do |post| %>
      <div class="one-post">
        <%= link_to form_path(post) do %>
          <% if post.image_id? %>  <!-- アップロード画像がある場合に実行する -->
            <p>
              <%= image_tag post.image_id.url %><!-- userインスタンスの画像ファイルのURLを取得し表示 -->
            </p>
          <% end %>
          <p class="caption mb-0"><%= post.title %></p>
          <p class="caption"><%= "#{post.comments.count} コメント" %></p>
        <% end %>
      </div>
    <% end %>
  </div>
  <%= paginate @posts %>
</div>
</div>
